#######################################################################
# 
# This list of tasks can be included in ansible playbooks to print a
# header in the output file(s) generated by the playbook. In order to
# use these tasks, you must define the timestamp variable in the
# playbook that includes this file.
# 
#######################################################################

- name: "Get system uptime"
  shell: /usr/bin/uptime -p | awk '{ $1 = ""; print $0; }'
  changed_when: False
  register: uptime

- name: "print hostname, IP Address, Description, Kernel Version, and uptime"
  lineinfile:
    dest: /tmp/ansible_{{ timestamp }}
    insertafter: EOF
    line: "                                {{ ansible_hostname }}\nIP Address: {{ ansible_default_ipv4.address }}\nDescription: {{ ansible_distribution }} {{ ansible_system }} {{ ansible_distribution_version }} ({{ ansible_distribution_release }})\nUptime: {{ uptime.stdout }}\n"
    state: present
